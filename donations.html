<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rabbi's Garden - Support Our Green Mission</title>
  <meta name="description" content="Support Rabbi's Garden in spreading biblical teachings and community development through your donations">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Poppins:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <script src="https://js.stripe.com/v3/"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_LIVE_PAYPAL_CLIENT_ID&currency=USD"></script>
  
  <style>
    :root {
      --primary-green: #1e8449;
      --dark-green: #145a32;
      --light-green: #58d68d;
      --gold-accent: #f1c40f;
      --pure-white: #ffffff;
      --off-white: #f8f9fa;
      --dark-bg: #1a1a1a;
      --text-dark: #333333;
      --error-red: #dc3545;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      color: var(--text-dark);
      line-height: 1.6;
      background-color: var(--off-white);
    }

    h1, h2, h3, h4 {
      font-family: 'Montserrat', sans-serif;
      color: var(--dark-green);
    }

    .hero-title {
      font-family: 'Playfair Display', serif;
      font-size: 3.5rem;
      color: var(--pure-white);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Skip to content link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--primary-green);
      color: white;
      padding: 8px;
      z-index: 100;
      transition: top 0.3s;
    }

    .skip-link:focus {
      top: 0;
    }

    /* Navigation */
    nav {
      background-color: var(--pure-white);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
    }

    .logo {
      font-family: 'Montserrat', sans-serif;
      font-weight: 900;
      font-size: 1.8rem;
      color: var(--primary-green);
      text-decoration: none;
      display: flex;
      align-items: center;
    }

    .logo i {
      margin-right: 10px;
      color: var(--gold-accent);
    }

    .nav-links {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .nav-links li {
      margin-left: 2rem;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-dark);
      font-weight: 600;
      transition: color 0.3s;
      position: relative;
      padding: 5px 0;
    }

    .nav-links a.active {
      color: var(--primary-green);
    }

    .nav-links a:hover {
      color: var(--primary-green);
    }

    .nav-links a:after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background-color: var(--primary-green);
      transition: width 0.3s;
    }

    .nav-links a:hover:after,
    .nav-links a.active:after {
      width: 100%;
    }

    /* Hero Section */
    .hero {
      background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), 
                  url('https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80') no-repeat center center/cover;
      height: 60vh;
      display: flex;
      align-items: center;
      text-align: center;
      color: white;
      margin-bottom: 3rem;
    }

    .hero-content {
      width: 100%;
    }

    .hero p {
      font-size: 1.2rem;
      max-width: 700px;
      margin: 1rem auto;
    }

    /* Reasons Section */
    .reasons {
      padding: 4rem 0;
      background-color: var(--pure-white);
    }

    .reasons-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }

    .reason-card {
      background-color: var(--off-white);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .reason-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .reason-img {
      height: 200px;
      overflow: hidden;
    }

    .reason-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s;
    }

    .reason-card:hover .reason-img img {
      transform: scale(1.1);
    }

    .reason-content {
      padding: 1.5rem;
    }

    .reason-content h3 {
      color: var(--primary-green);
      margin-bottom: 1rem;
      font-size: 1.4rem;
    }

    /* Donations Section */
    .donations {
      padding: 5rem 0;
      background: linear-gradient(to bottom, var(--off-white), var(--pure-white));
    }

    .section-title {
      text-align: center;
      margin-bottom: 3rem;
      position: relative;
    }

    .section-title:after {
      content: '';
      display: block;
      width: 100px;
      height: 4px;
      background-color: var(--gold-accent);
      margin: 1rem auto 0;
    }

    .donations .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .donations .card {
      background-color: var(--pure-white);
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      border-top: 5px solid var(--primary-green);
    }

    .donations .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .donations .card h3 {
      color: var(--primary-green);
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }

    .donations .card .benefits li {
      margin-bottom: 0.8rem;
      position: relative;
      padding-left: 1.8rem;
    }

    .donations .card .benefits li:before {
      content: '\f00c';
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      position: absolute;
      left: 0;
      color: var(--light-green);
    }

    .donations .card .amount {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--primary-green);
      margin: 1.5rem 0;
      text-align: center;
    }

    /* Buttons */
    .btn {
      display: inline-block;
      background-color: var(--primary-green);
      color: white;
      padding: 12px 30px;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .btn:hover,
    .btn:focus {
      background-color: var(--dark-green);
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      outline: none;
    }

    .btn:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* Donation Form */
    .donation-section {
      display: flex;
      gap: 2rem;
      margin-top: 2rem;
    }

    .custom-donation {
      background-color: var(--pure-white);
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      flex: 2;
    }

    .payment-info {
      background-color: var(--pure-white);
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      flex: 1;
    }

    .payment-info h3 {
      color: var(--primary-green);
      margin-bottom: 20px;
      text-align: center;
      position: relative;
      padding-bottom: 10px;
    }

    .payment-info h3:after {
      content: '';
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 0;
      width: 50px;
      height: 2px;
      background-color: var(--gold-accent);
    }

    .payment-method-info {
      margin-bottom: 25px;
    }

    .payment-method-info h4 {
      display: flex;
      align-items: center;
      color: var(--primary-green);
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .payment-method-info h4 i {
      margin-right: 10px;
      font-size: 1.3rem;
    }

    .payment-method-info p {
      margin-bottom: 8px;
      font-size: 0.9rem;
      color: #555;
    }

    .payment-method-info .copy-btn {
      background-color: var(--primary-green);
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 0.8em;
      margin-left: 5px;
      transition: all 0.3s;
    }

    .payment-method-info .copy-btn:hover,
    .payment-method-info .copy-btn:focus {
      background-color: var(--dark-green);
      outline: none;
    }

    .custom-donation h3 {
      text-align: center;
      margin-bottom: 20px;
    }

    .donation-form {
      display: flex;
      flex-direction: column;
    }

    .donation-amounts {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .donation-amounts .amount-option {
      padding: 10px 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .donation-amounts .amount-option:hover,
    .donation-amounts .amount-option.selected,
    .donation-amounts .amount-option:focus {
      background-color: var(--primary-green);
      color: white;
      border-color: var(--primary-green);
      outline: none;
    }

    .custom-amount {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .custom-amount span {
      margin-right: 10px;
      font-weight: 500;
    }

    .custom-amount input {
      flex-grow: 1;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
    }

    .custom-amount input:focus {
      border-color: var(--primary-green);
      outline: none;
      box-shadow: 0 0 0 2px rgba(30, 132, 73, 0.2);
    }

    .donor-info {
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 10px 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
    }

    .form-group input:focus,
    .form-group select:focus {
      border-color: var(--primary-green);
      outline: none;
      box-shadow: 0 0 0 2px rgba(30, 132, 73, 0.2);
    }

    .donation-message {
      margin-bottom: 20px;
    }

    .donation-message textarea {
      width: 100%;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-family: 'Poppins', sans-serif;
      min-height: 100px;
      resize: vertical;
    }

    .donation-message textarea:focus {
      border-color: var(--primary-green);
      outline: none;
      box-shadow: 0 0 0 2px rgba(30, 132, 73, 0.2);
    }

    .form-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .payment-options {
      display: flex;
      gap: 15px;
    }

    .payment-options i {
      font-size: 2em;
    }

    .fa-cc-visa { color: #1a1f71; }
    .fa-cc-mastercard { color: #eb001b; }
    .fa-cc-amex { color: #002663; }
    .fa-cc-paypal { color: #003087; }

    /* Payment Modal */
    .payment-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .payment-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .payment-content h3 {
      color: var(--primary-green);
      margin-bottom: 20px;
      text-align: center;
    }

    .payment-methods {
      margin: 20px 0;
    }

    .payment-method {
      display: flex;
      align-items: center;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .payment-method:hover,
    .payment-method:focus {
      border-color: var(--primary-green);
      outline: none;
    }

    .payment-method.selected {
      border-color: var(--primary-green);
      background-color: rgba(30, 132, 73, 0.1);
    }

    .payment-method i {
      font-size: 2em;
      margin-right: 15px;
    }

    .payment-method .method-info {
      flex-grow: 1;
    }

    .payment-method .method-info h4 {
      margin-bottom: 5px;
    }

    .payment-method .method-info p {
      font-size: 0.9em;
      color: #666;
    }

    .bank-details {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #f9f9f9;
      display: none;
    }

    .bank-details h4 {
      margin-bottom: 10px;
    }

    .bank-details p {
      margin-bottom: 8px;
    }

    .bank-details .copy-btn {
      background-color: var(--primary-green);
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 0.8em;
      margin-left: 5px;
    }

    /* Stripe Elements */
    .StripeElement {
      box-sizing: border-box;
      height: 40px;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: white;
    }

    .StripeElement--focus {
      border-color: var(--primary-green);
      box-shadow: 0 0 0 1px var(--primary-green);
    }

    .StripeElement--invalid {
      border-color: var(--error-red);
    }

    .StripeElement--webkit-autofill {
      background-color: #fefde5 !important;
    }

    #card-errors {
      color: var(--error-red);
      margin: 10px 0;
      font-size: 0.9em;
    }

    #paypal-button-container {
      display: none;
      margin: 20px 0;
    }

    .modal-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }

    /* Cookie consent banner */
    .cookie-consent {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: var(--dark-bg);
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 999;
    }

    .cookie-consent p {
      margin-right: 20px;
      font-size: 0.9rem;
    }

    .cookie-consent button {
      background-color: var(--primary-green);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      white-space: nowrap;
    }

    /* Footer */
    footer {
      background-color: var(--dark-bg);
      color: white;
      padding: 4rem 0 2rem;
    }

    .footer-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .footer-logo {
      font-family: 'Montserrat', sans-serif;
      font-weight: 900;
      font-size: 1.8rem;
      color: var(--pure-white);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
    }

    .footer-logo i {
      margin-right: 10px;
      color: var(--gold-accent);
    }

    .footer-about p {
      margin-bottom: 1rem;
      color: #aaa;
    }

    .footer-links h3, .footer-social h3 {
      color: var(--pure-white);
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      position: relative;
      padding-bottom: 10px;
    }

    .footer-links h3:after, .footer-social h3:after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 50px;
      height: 2px;
      background-color: var(--gold-accent);
    }

    .footer-links ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer-links li {
      margin-bottom: 0.8rem;
    }

    .footer-links a {
      color: #aaa;
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--light-green);
    }

    .social-icons {
      display: flex;
      gap: 1rem;
    }

    .social-icons a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background-color: transparent;
      border-radius: 50%;
      color: var(--light-green);
      border: 2px solid var(--light-green);
      transition: all 0.3s;
    }

    .social-icons a:hover {
      background-color: var(--light-green);
      color: var(--dark-bg);
      transform: translateY(-3px);
    }

    .footer-bottom {
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid #333;
      color: #777;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        padding: 1rem;
      }

      .nav-links {
        margin-top: 1rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .nav-links li {
        margin: 0.5rem 1rem;
      }

      header h1 {
        font-size: 2.5rem;
      }

      .service-item {
        width: 100%;
        margin-bottom: 20px;
      }

      .leader-container {
        flex-direction: column;
        text-align: center;
      }

      .leader-photo {
        margin-bottom: 20px;
      }

      .modal-content {
        width: 95%;
        margin: 10% auto;
      }
    }

    /* Validation */
    .validation-error {
      color: var(--error-red);
      margin: 10px 0;
      text-align: center;
      font-weight: 500;
    }

    /* Success Modal */
    .success-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .success-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      text-align: center;
    }

    .success-content h3 {
      color: var(--primary-green);
      margin-bottom: 20px;
    }

    .success-content p {
      white-space: pre-line;
      margin-bottom: 20px;
      text-align: left;
    }

    .success-content .success-icon {
      color: var(--primary-green);
      font-size: 4rem;
      margin-bottom: 20px;
    }

    /* Error Modal */
    .error-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .error-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 500px;
      text-align: center;
    }

    .error-content h3 {
      color: var(--error-red);
      margin-bottom: 20px;
    }

    .error-content p {
      white-space: pre-line;
      margin-bottom: 20px;
      text-align: left;
    }

    .error-content .error-icon {
      color: var(--error-red);
      font-size: 4rem;
      margin-bottom: 20px;
    }

    /* Testimonials */
    .testimonials {
      padding: 4rem 0;
      background-color: var(--pure-white);
    }

    .testimonial-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .testimonial-card {
      background-color: var(--off-white);
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .testimonial-text {
      font-style: italic;
      margin-bottom: 1rem;
    }

    .testimonial-author {
      font-weight: 600;
      color: var(--primary-green);
    }

    /* FAQ */
    .faq {
      padding: 4rem 0;
      background-color: var(--off-white);
    }

    .faq-item {
      margin-bottom: 1rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      overflow: hidden;
    }

    .faq-question {
      padding: 1rem;
      background-color: var(--pure-white);
      font-weight: 600;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .faq-question:hover {
      background-color: #f5f5f5;
    }

    .faq-answer {
      padding: 1rem;
      background-color: var(--pure-white);
      border-top: 1px solid #eee;
      display: none;
    }

    .faq-answer.show {
      display: block;
    }

    /* Privacy Policy Modal */
    .privacy-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .privacy-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      max-width: 800px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .privacy-content h3 {
      color: var(--primary-green);
      margin-bottom: 20px;
      text-align: center;
    }

    .privacy-content p {
      margin-bottom: 15px;
    }

    .privacy-content ul {
      margin-bottom: 15px;
      padding-left: 20px;
    }

    .privacy-content li {
      margin-bottom: 8px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
        padding: 1rem;
      }

      .nav-links {
        margin-top: 1rem;
        flex-wrap: wrap;
        justify-content: center;
      }

      .nav-links li {
        margin: 0.5rem;
      }

      .hero-title {
        font-size: 2.5rem;
      }

      .donations .grid {
        grid-template-columns: 1fr;
      }

      .donation-section {
        flex-direction: column;
      }

      .form-footer {
        flex-direction: column;
        gap: 20px;
      }
      
      .payment-options {
        order: -1;
        justify-content: center;
      }
      
      .modal-buttons {
        flex-direction: column;
      }
      
      .modal-buttons .btn {
        width: 100%;
      }

      .cookie-consent {
        flex-direction: column;
        text-align: center;
      }

      .cookie-consent p {
        margin-right: 0;
        margin-bottom: 10px;
      }
    }

    /* Enhanced Validation */
    .error-message {
      color: var(--error-red);
      font-size: 0.8em;
      margin-top: 5px;
    }
    .input-error {
      border-color: var(--error-red) !important;
    }
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-right: 10px;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body>
  <!-- Skip to content link -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Navigation -->
  <nav aria-label="Main navigation">
    <div class="nav-container container">
      <a href="index.html" class="logo">
        <i class="fas fa-leaf" aria-hidden="true"></i>Rabbi's Garden
      </a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="donations.html" class="active">Donations</a></li>
        <li><a href="sermons.html">Sermons</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="contacts.html">Contacts</a></li>
      </ul>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content container">
      <h1 class="hero-title">Support Our Mission</h1>
      <p>At Rabbi's Garden, we are dedicated to spreading the life-changing message of the Bible to individuals around the world. Our mission is to make the teachings of Christ accessible to all—whether through translations, community outreach, or educational programs.</p>
      <a href="#donate" class="btn">Donate Now</a>
    </div>
  </section>

  <!-- Main Content -->
  <main id="main-content">
    <!-- Why Donate Section -->
    <section class="reasons container" id="why-donate">
      <h2 class="section-title">Why Your Donation Matters</h2>
      <div class="reasons-grid">
        <div class="reason-card">
          <div class="reason-img">
            <img src="Photos/IMG-20250317-WA0025.jpg" alt="Community members working together in the garden">
          </div>
          <div class="reason-content">
            <h3>Reaching the Unreached</h3>
            <p>There are still millions of people around Uganda who have never heard the message of Jesus Christ. Your donation helps us take the Bible to the farthest corners of the earth, reaching individuals and communities who are spiritually hungry and eager to learn about Christ's love.</p>
          </div>
        </div>
        
        <div class="reason-card">
          <div class="reason-img">
            <img src="Photos/IMG-20250320-WA0035.jpg" alt="Children learning in the garden">
          </div>
          <div class="reason-content">
            <h3>Educational Outreach</h3>
            <p>Education is key to spiritual development. We provide resources such as Bible courses, study guides, and training for pastors and leaders, equipping them with the knowledge and tools to effectively share God's Word with others. With your help, we can continue to provide these resources to those who are leading others in faith.</p>
          </div>
        </div>
        
        <div class="reason-card">
          <div class="reason-img">
            <img src="Photos/IMG-20250317-WA0016(1).jpg" alt="Volunteers planting trees in the garden">
          </div>
          <div class="reason-content">
            <h3>Building Discipleship Communities</h3>
            <p>Beyond just distributing Bibles, we're committed to creating communities where believers can grow together in faith. Your gift helps fund local Bible study groups, discipleship programs, and church planting efforts that foster lasting spiritual growth. You're not just giving a Bible—you're empowering individuals to engage with it, learn from it, and live it out.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Donations Section -->
    <section class="donations container" id="donate">
      <h2 class="section-title">Make a Difference Today</h2>
      <p class="intro" style="text-align: center; max-width: 800px; margin: 0 auto 60px;">
        Choose from one of our donation options below or specify your own amount. Every contribution helps us grow.
      </p>
      
      <div class="grid">
        <div class="card">
          <h3>Bringing the Bible to communities</h3>
          <ul class="benefits">
            <li>Allows us to provide Bibles to 10 families in a rural village, introducing them to the Word of God for the first time.</li>
            <li>Provides a month's worth of Bible study materials for a church leader, helping them teach others effectively.</li>
            <li>Sponsors a Bible study group for 25 new believers, allowing them to meet regularly for fellowship, teaching, and prayer.</li>
          </ul>
          <div class="amount">$25</div>
          <button class="btn donate-btn" data-amount="25">Donate Now</button>
        </div>
        
        <div class="card">
          <h3>Empowering Disciples and Leaders</h3>
          <ul class="benefits">
            <li>Supports a pastor's leadership training program, giving them the skills and resources to disciple hundreds of new believers.</li>
            <li>Funds a community outreach event that can lead to dozens of new believers making a commitment to Christ, impacting families and neighborhoods for generations.</li>
            <li>Provides 10 people with the opportunity to hear the Gospel, opening doors for personal salvation and eternal life.</li>
          </ul>
          <div class="amount">$75</div>
          <button class="btn donate-btn" data-amount="75">Donate Now</button>
        </div>
        
        <div class="card">
          <h3>Equipping Believers to Live Out Their Faith</h3>
          <ul class="benefits">
            <li>Provides a discipleship course for 20 people, equipping them with the practical tools they need to live out their faith and mentor others.</li>
            <li>Supports a Bible-based educational workshop for women, empowering them to teach their families the principles of the Christian faith.</li>
            <li>Provides materials for a youth outreach program that engages children and teenagers in faith-building activities and Bible lessons.</li>
            <li>Helps establish a new church in a rural area, providing worship space, resources, and support for the first few months.</li>
          </ul>
          <div class="amount">$150</div>
          <button class="btn donate-btn" data-amount="150">Donate Now</button>
        </div>
      </div>
      
      <div class="donation-section">
        <div class="custom-donation">
          <h3>Custom Donation Amount</h3>
          <form id="customDonationForm" class="donation-form">
            <div class="donation-amounts">
              <div class="amount-option" data-amount="10">$10</div>
              <div class="amount-option" data-amount="25">$25</div>
              <div class="amount-option selected" data-amount="50">$50</div>
              <div class="amount-option" data-amount="100">$100</div>
              <div class="amount-option" data-amount="250">$250</div>
            </div>
            
            <div class="custom-amount">
              <span>$</span>
              <input type="number" id="customAmount" placeholder="Other amount" min="1" value="50" aria-label="Enter custom donation amount">
            </div>
            
            <div class="donor-info">
              <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" required maxlength="100" aria-required="true">
              </div>
              <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" required maxlength="255" aria-required="true">
              </div>
              <div class="form-group">
                <label for="frequency">Donation Frequency</label>
                <select id="frequency" aria-label="Select donation frequency">
                  <option value="one-time">One-time donation</option>
                  <option value="monthly">Monthly donation</option>
                  <option value="quarterly">Quarterly donation</option>
                  <option value="annually">Annual donation</option>
                </select>
              </div>
            </div>
            
            <div class="donation-message">
              <label for="message">Personal Message (Optional)</label>
              <textarea id="message" placeholder="Add a personal message..." maxlength="500" aria-label="Optional personal message"></textarea>
            </div>
            
            <div class="form-footer">
              <div class="payment-options">
                <i class="fab fa-cc-visa" aria-hidden="true"></i>
                <i class="fab fa-cc-mastercard" aria-hidden="true"></i>
                <i class="fab fa-cc-amex" aria-hidden="true"></i>
                <i class="fab fa-cc-paypal" aria-hidden="true"></i>
              </div>
              <button type="submit" class="btn">Continue to Payment</button>
            </div>
          </form>
        </div>
        
        <div class="payment-info">
          <h3>Payment Information</h3>
          
          <div class="payment-method-info">
            <h4><i class="fab fa-cc-stripe" style="color: #6772e5;" aria-hidden="true"></i> Credit/Debit Card</h4>
            <p>Secure payments processed through Stripe</p>
            <p>We accept Visa, Mastercard, American Express, and other major cards</p>
          </div>
          
          <div class="payment-method-info">
            <h4><i class="fab fa-paypal" style="color: #003087;" aria-hidden="true"></i> PayPal</h4>
            <p>Pay with your PayPal account or credit card</p>
            <p>Send to: <strong>donations@rabbisgarden.org</strong></p>
          </div>
          
          <div class="payment-method-info">
            <h4><i class="fas fa-university" style="color: #1e8449;" aria-hidden="true"></i> Bank Transfer</h4>
            <p>Account Name: <strong>Rabbi's Garden Foundation</strong></p>
            <p>Bank: <strong>Green Earth Bank</strong></p>
            <p>Account #: <strong id="accountNumber">123456789</strong> <button class="copy-btn" data-target="accountNumber">Copy</button></p>
            <p>Routing #: <strong id="routingNumber">987654321</strong> <button class="copy-btn" data-target="routingNumber">Copy</button></p>
            <p>SWIFT/BIC: <strong id="swiftCode">GREAUS33</strong> <button class="copy-btn" data-target="swiftCode">Copy</button></p>
          </div>
          
          <div class="payment-method-info">
            <h4><i class="fas fa-money-bill-wave" style="color: #28a745;" aria-hidden="true"></i> Check</h4>
            <p>Make payable to: <strong>Rabbi's Garden Foundation</strong></p>
            <p>Mail to: 123 Garden Way, Greenville, CA 12345</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials container">
      <h2 class="section-title">What Donors Say</h2>
      <div class="testimonial-grid">
        <div class="testimonial-card">
          <p class="testimonial-text">"Supporting Rabbi's Garden has been one of the most rewarding experiences. Seeing the impact of my donations through their regular updates makes me confident my money is being used effectively."</p>
          <p class="testimonial-author">— Sarah Johnson, Monthly Donor</p>
        </div>
        <div class="testimonial-card">
          <p class="testimonial-text">"The transparency and dedication of this organization is unmatched. I know exactly how my donation is being used to spread God's word in communities that need it most."</p>
          <p class="testimonial-author">— Michael Brown, Supporter</p>
        </div>
        <div class="testimonial-card">
          <p class="testimonial-text">"After visiting one of their community projects, I was moved to become a regular donor. The work they're doing is truly transformative."</p>
          <p class="testimonial-author">— Grace Williams, Volunteer</p>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq container">
      <h2 class="section-title">Frequently Asked Questions</h2>
      <div class="faq-container">
        <div class="faq-item">
          <div class="faq-question" tabindex="0">
            <span>How will my donation be used?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Your donation will be used to support our various programs including Bible distribution, community outreach, educational materials, and pastoral training. We allocate funds based on the greatest need at the time, unless you specify a particular program you'd like to support.</p>
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-question" tabindex="0">
            <span>Is my donation tax-deductible?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Yes, Rabbi's Garden is a registered 501(c)(3) nonprofit organization. All donations are tax-deductible to the fullest extent allowed by law. You will receive a receipt for your donation that you can use for tax purposes.</p>
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-question" tabindex="0">
            <span>Can I make a recurring donation?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>Absolutely! We offer monthly donation options that provide consistent support for our programs. You can set up a recurring donation through our donation form by selecting the "Monthly" option when choosing your payment method.</p>
          </div>
        </div>
        <div class="faq-item">
          <div class="faq-question" tabindex="0">
            <span>How can I get a receipt for my donation?</span>
            <i class="fas fa-chevron-down"></i>
          </div>
          <div class="faq-answer">
            <p>All donors receive an email receipt immediately after making a donation. If you need another copy or didn't receive yours, please contact our donor support team at donations@rabbisgarden.org and we'll be happy to assist you.</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-container">
        <div class="footer-about">
          <div class="footer-logo">
            <i class="fas fa-leaf" aria-hidden="true"></i>Rabbi's Garden
          </div>
          <p>A community-based initiative dedicated to sharing the transformative power of the Bible with the world.</p>
          <p>Join Us in Spreading the Word: Become a Part of Our Bible Community!</p>
        </div>
        
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="donations.html">Donations</a></li>
            <li><a href="sermons.html">Sermons</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="contacts.html">Contacts</a></li>
          </ul>
        </div>
        
        <div class="footer-social">
          <h3>Connect With Us</h3>
          <div class="social-icons">
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
            <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
          </div>
          <p style="margin-top: 1rem; color: #aaa;">Follow our journey and see the impact of your support.</p>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; <span id="current-year"></span> Rabbi's Garden. All rights reserved. | <a href="#" id="privacyLink" style="color: var(--light-green);">Privacy Policy</a></p>
      </div>
    </div>
  </footer>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="privacy-modal">
    <div class="privacy-content">
      <h3>Privacy Policy</h3>
      <p>Last updated: January 1, 2025</p>
      
      <p>Rabbi's Garden ("us", "we", or "our") operates the Rabbi's Garden website (the "Service").</p>
      
      <p>This page informs you of our policies regarding the collection, use, and disclosure of personal data when you use our Service and the choices you have associated with that data.</p>
      
      <h4>Information Collection and Use</h4>
      <p>We collect several different types of information for various purposes to provide and improve our Service to you.</p>
      
      <h4>Types of Data Collected</h4>
      <ul>
        <li><strong>Personal Data:</strong> While using our Service, we may ask you to provide us with certain personally identifiable information that can be used to contact or identify you ("Personal Data"). Personally identifiable information may include, but is not limited to: Email address, First name and last name, Phone number, Address, Cookies and Usage Data.</li>
        <li><strong>Usage Data:</strong> We may also collect information how the Service is accessed and used ("Usage Data"). This Usage Data may include information such as your computer's Internet Protocol address (e.g. IP address), browser type, browser version, the pages of our Service that you visit, the time and date of your visit, the time spent on those pages, unique device identifiers and other diagnostic data.</li>
        <li><strong>Tracking & Cookies Data:</strong> We use cookies and similar tracking technologies to track the activity on our Service and hold certain information.</li>
      </ul>
      
      <h4>Use of Data</h4>
      <p>Rabbi's Garden uses the collected data for various purposes:</p>
      <ul>
        <li>To provide and maintain our Service</li>
        <li>To notify you about changes to our Service</li>
        <li>To allow you to participate in interactive features of our Service when you choose to do so</li>
        <li>To provide customer support</li>
        <li>To gather analysis or valuable information so that we can improve our Service</li>
        <li>To monitor the usage of our Service</li>
        <li>To detect, prevent and address technical issues</li>
      </ul>
      
      <h4>Security of Data</h4>
      <p>The security of your data is important to us, but remember that no method of transmission over the Internet, or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your Personal Data, we cannot guarantee its absolute security.</p>
      
      <h4>Changes to This Privacy Policy</h4>
      <p>We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.</p>
      
      <p>You are advised to review this Privacy Policy periodically for any changes. Changes to this Privacy Policy are effective when they are posted on this page.</p>
      
      <button id="closePrivacyModal" class="btn">Close</button>
    </div>
  </div>

  <!-- Cookie Consent Banner -->
  <div class="cookie-consent" id="cookieConsent" style="display: none;">
    <p>We use cookies to enhance your experience on our website. By continuing to browse, you agree to our use of cookies.</p>
    <button id="acceptCookies">Accept</button>
  </div>

  <!-- Payment Modal -->
  <div id="paymentModal" class="payment-modal">
    <div class="payment-content">
      <h3>Complete Your Donation</h3>
      <p id="donationSummary">You're donating $50 to Rabbi's Garden</p>
      
      <div class="payment-methods">
        <h4>Select Payment Method</h4>
        
        <div class="payment-method selected" data-method="card" tabindex="0">
          <i class="far fa-credit-card" style="color: #1a1f71;" aria-hidden="true"></i>
          <div class="method-info">
            <h4>Credit/Debit Card</h4>
            <p>Pay securely with your Visa, Mastercard, or American Express</p>
          </div>
        </div>
        
        <div class="payment-method" data-method="paypal" tabindex="0">
          <i class="fab fa-cc-paypal" style="color: #003087;" aria-hidden="true"></i>
          <div class="method-info">
            <h4>PayPal</h4>
            <p>Pay with your PayPal account or credit card</p>
          </div>
        </div>
        
        <div class="payment-method" data-method="bank" tabindex="0">
          <i class="fas fa-university" style="color: #1e8449;" aria-hidden="true"></i>
          <div class="method-info">
            <h4>Bank Transfer</h4>
            <p>Direct transfer to our bank account</p>
          </div>
        </div>
      </div>
      
      <div id="bankDetails" class="bank-details">
        <h4>Bank Transfer Details</h4>
        <p><strong>Account Name:</strong> Rabbi's Garden Foundation</p>
        <p><strong>Bank:</strong> Green Earth Bank</p>
        <p><strong>Account #:</strong> <span id="accountNumberModal">123456789</span> <button class="copy-btn" data-target="accountNumberModal">Copy</button></p>
        <p><strong>Routing #:</strong> <span id="routingNumberModal">987654321</span> <button class="copy-btn" data-target="routingNumberModal">Copy</button></p>
        <p><strong>SWIFT/BIC:</strong> <span id="swiftCodeModal">GREAUS33</span> <button class="copy-btn" data-target="swiftCodeModal">Copy</button></p>
        <p>Please include your name as reference when making the transfer.</p>
      </div>
      
      <div id="cardElementContainer" style="display: none;">
        <div class="form-group">
          <label for="cardholder-name">Cardholder Name</label>
          <input type="text" id="cardholder-name" placeholder="Name on card" required maxlength="100" aria-required="true">
        </div>
        <div id="cardElement" class="form-group">
          <!-- Stripe.js will inject the Card Element here -->
        </div>
        <div id="card-errors" role="alert"></div>
      </div>
      
      <div id="paypal-button-container" style="display: none; margin: 20px 0;"></div>
      
      <div class="modal-buttons">
        <button id="confirmPayment" class="btn" style="display: none;">Complete Donation</button>
        <button id="cancelPayment" class="btn btn-outline">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Success Modal Template -->
  <div id="successModalTemplate" style="display: none;">
    <div class="success-content">
      <div class="success-icon">
        <i class="fas fa-check-circle" aria-hidden="true"></i>
      </div>
      <h3>Donation Successful!</h3>
      <p id="successMessage"></p>
      <button id="closeSuccessModal" class="btn">Close</button>
    </div>
  </div>

  <!-- Error Modal Template -->
  <div id="errorModalTemplate" style="display: none;">
    <div class="error-content">
      <div class="error-icon">
        <i class="fas fa-exclamation-circle" aria-hidden="true"></i>
      </div>
      <h3>Payment Failed</h3>
      <p id="errorMessage"></p>
      <button id="closeErrorModal" class="btn">Try Again</button>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // ===== ENHANCED VALIDATION =====
    function validateDonationForm() {
      let isValid = true;
      
      // Clear previous errors
      document.querySelectorAll('.error-message').forEach(el => el.remove());
      document.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));

      // Amount validation
      const amountInput = document.getElementById('customAmount');
      const amount = parseFloat(amountInput.value);
      if (isNaN(amount)) {
        showError(amountInput, 'Please enter a valid number');
        isValid = false;
      } else if (amount < 1) {
        showError(amountInput, 'Minimum donation is $1');
        isValid = false;
      } else if (amount > 100000) {
        showError(amountInput, 'Maximum donation is $100,000');
        isValid = false;
      }

      // Name validation
      const nameInput = document.getElementById('name');
      if (nameInput.value.trim().length < 2) {
        showError(nameInput, 'Please enter your full name');
        isValid = false;
      }

      // Email validation
      const emailInput = document.getElementById('email');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(emailInput.value.trim())) {
        showError(emailInput, 'Please enter a valid email');
        isValid = false;
      }

      return isValid;
    }

    function showError(inputElement, message) {
      inputElement.classList.add('input-error');
      const error = document.createElement('div');
      error.className = 'error-message';
      error.textContent = message;
      inputElement.parentNode.appendChild(error);
    }

    // ===== PAYMENT PROCESSING =====
    async function processDonation(formData) {
      try {
        // Show loading state
        const submitBtn = document.querySelector('#customDonationForm button[type="submit"]');
        submitBtn.innerHTML = '<span class="loading-spinner"></span> Processing...';
        submitBtn.disabled = true;

        // Process payment (replace with your actual backend endpoint)
        const response = await fetch('https://your-backend.com/process-donation', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });

        if (!response.ok) throw new Error('Payment failed');
        const result = await response.json();

        // Show success (use your existing modal or this simple alert)
        alert(`Thank you for your donation! Transaction ID: ${result.transactionId}`);

      } catch (error) {
        alert(`Error: ${error.message}`);
      } finally {
        const submitBtn = document.querySelector('#customDonationForm button[type="submit"]');
        submitBtn.innerHTML = 'Continue to Payment';
        submitBtn.disabled = false;
      }
    }

    // Complete Donation Processing System
    document.addEventListener('DOMContentLoaded', function() {
      // Security configuration
      const config = {
        stripeKey: 'pk_live_YOUR_STRIPE_PUBLISHABLE_KEY',
        paypalKey: 'YOUR_LIVE_PAYPAL_CLIENT_ID',
        backendUrl: 'https://yourdomain.com/donation-processor.php',
        googleAnalyticsId: 'G-YOUR_GA_TRACKING_ID'
      };

      // State management
      const state = {
        currentDonation: {
          amount: 50,
          type: 'custom',
          frequency: 'one-time',
          paymentMethod: 'card',
          donorInfo: {
            name: '',
            email: '',
            message: ''
          }
        },
        processing: false,
        securityToken: generateSecurityToken()
      };

      // Initialize payment processors
      const stripe = Stripe(config.stripeKey);
      let elements;
      let cardElement;

      // Initialize analytics
      if (typeof gtag !== 'undefined') {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', config.googleAnalyticsId);
      }

      // DOM elements
      const dom = {
        amountOptions: document.querySelectorAll('.amount-option'),
        customAmount: document.getElementById('customAmount'),
        donationForm: document.getElementById('customDonationForm'),
        paymentModal: document.getElementById('paymentModal'),
        donationSummary: document.getElementById('donationSummary'),
        paymentMethods: document.querySelectorAll('.payment-method'),
        bankDetails: document.getElementById('bankDetails'),
        cardElementContainer: document.getElementById('cardElementContainer'),
        paypalButtonContainer: document.getElementById('paypalButtonContainer'),
        confirmPaymentBtn: document.getElementById('confirmPayment'),
        cardholderName: document.getElementById('cardholder-name'),
        nameInput: document.getElementById('name'),
        emailInput: document.getElementById('email'),
        frequencySelect: document.getElementById('frequency'),
        messageTextarea: document.getElementById('message'),
        cookieConsent: document.getElementById('cookieConsent'),
        acceptCookiesBtn: document.getElementById('acceptCookies'),
        privacyLink: document.getElementById('privacyLink'),
        privacyModal: document.getElementById('privacyModal'),
        closePrivacyModal: document.getElementById('closePrivacyModal')
      };

      // Initialize the page
      init();

      function init() {
        // Initialize event listeners
        setupEventListeners();
        
        // Check cookie consent
        checkCookieConsent();
        
        // Initialize FAQ functionality
        initFAQ();
      }

      function setupEventListeners() {
        // Amount selection
        dom.amountOptions.forEach(option => {
          option.addEventListener('click', () => selectAmount(option));
          option.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              selectAmount(option);
            }
          });
        });

        // Custom amount input
        dom.customAmount.addEventListener('input', updateCustomAmount);

        // Form submission
        dom.donationForm.addEventListener('submit', handleFormSubmit);

        // Payment method selection
        dom.paymentMethods.forEach(method => {
          method.addEventListener('click', () => selectPaymentMethod(method));
          method.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              selectPaymentMethod(method);
            }
          });
        });

        // Confirm payment button
        dom.confirmPaymentBtn.addEventListener('click', handlePaymentConfirmation);

        // Cancel payment button
        document.getElementById('cancelPayment').addEventListener('click', hidePaymentModal);

        // Modal backdrop click
        dom.paymentModal.addEventListener('click', (e) => {
          if (e.target === dom.paymentModal) hidePaymentModal();
        });

        // Copy buttons for bank details
        document.querySelectorAll('.copy-btn').forEach(btn => {
          btn.addEventListener('click', copyToClipboard);
        });

        // Cookie consent
        if (dom.acceptCookiesBtn) {
          dom.acceptCookiesBtn.addEventListener('click', acceptCookies);
        }

        // Donation card buttons
        document.querySelectorAll('.donate-btn').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const amount = parseFloat(e.target.getAttribute('data-amount'));
            if (!isNaN(amount)) {
              state.currentDonation.amount = amount;
              state.currentDonation.type = 'preset';
              showPaymentModal();
            }
          });
        });

        // Privacy policy link
        if (dom.privacyLink) {
          dom.privacyLink.addEventListener('click', (e) => {
            e.preventDefault();
            dom.privacyModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
          });
        }

        // Close privacy modal
        if (dom.closePrivacyModal) {
          dom.closePrivacyModal.addEventListener('click', () => {
            dom.privacyModal.style.display = 'none';
            document.body.style.overflow = 'auto';
          });
        }

        // Privacy modal backdrop click
        if (dom.privacyModal) {
          dom.privacyModal.addEventListener('click', (e) => {
            if (e.target === dom.privacyModal) {
              dom.privacyModal.style.display = 'none';
              document.body.style.overflow = 'auto';
            }
          });
        }
      }

      function selectAmount(option) {
        dom.amountOptions.forEach(opt => opt.classList.remove('selected'));
        option.classList.add('selected');
        const amount = parseFloat(option.getAttribute('data-amount'));
        if (!isNaN(amount)) {
          dom.customAmount.value = amount;
          state.currentDonation.amount = amount;
        }
      }

      function updateCustomAmount() {
        dom.amountOptions.forEach(opt => opt.classList.remove('selected'));
        const amount = parseFloat(dom.customAmount.value);
        state.currentDonation.amount = isNaN(amount) ? 0 : amount;
      }

      function selectPaymentMethod(method) {
        dom.paymentMethods.forEach(m => m.classList.remove('selected'));
        method.classList.add('selected');
        const methodValue = method.getAttribute('data-method');
        
        if (['card', 'paypal', 'bank'].includes(methodValue)) {
          state.currentDonation.paymentMethod = methodValue;
          updatePaymentUI();
        }
      }

      function updatePaymentUI() {
        // Hide all containers
        dom.bankDetails.style.display = 'none';
        dom.cardElementContainer.style.display = 'none';
        dom.paypalButtonContainer.style.display = 'none';
        dom.confirmPaymentBtn.style.display = 'none';
        
        // Clear PayPal container
        dom.paypalButtonContainer.innerHTML = '';
        
        // Show relevant UI based on payment method
        switch(state.currentDonation.paymentMethod) {
          case 'bank':
            dom.bankDetails.style.display = 'block';
            dom.confirmPaymentBtn.style.display = 'block';
            dom.confirmPaymentBtn.textContent = 'I Have Completed Transfer';
            break;
            
          case 'card':
            dom.cardElementContainer.style.display = 'block';
            dom.confirmPaymentBtn.style.display = 'block';
            dom.confirmPaymentBtn.textContent = state.currentDonation.frequency !== 'one-time' 
              ? `Set Up Recurring Donation` 
              : `Pay $${state.currentDonation.amount.toFixed(2)}`;
            initializeStripeElements();
            break;
            
          case 'paypal':
            renderPayPalButton();
            break;
        }
      }

      function initializeStripeElements() {
        if (!elements) {
          elements = stripe.elements();
          cardElement = elements.create('card', {
            style: {
              base: {
                fontSize: '16px',
                color: '#32325d',
                '::placeholder': {
                  color: '#aab7c4'
                }
              },
              invalid: {
                color: '#dc3545',
                iconColor: '#dc3545'
              }
            },
            hidePostalCode: true
          });
          
          cardElement.mount('#cardElement');
          
          cardElement.on('change', function(event) {
            const displayError = document.getElementById('card-errors');
            if (event.error) {
              displayError.textContent = event.error.message;
            } else {
              displayError.textContent = '';
            }
          });
        }
      }

      function renderPayPalButton() {
        dom.paypalButtonContainer.style.display = 'block';
        
        paypal.Buttons({
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{
                amount: {
                  value: state.currentDonation.amount.toFixed(2),
                  currency_code: 'USD',
                  breakdown: {
                    item_total: {
                      value: state.currentDonation.amount.toFixed(2),
                      currency_code: 'USD'
                    }
                  }
                },
                items: [{
                  name: 'Donation to Rabbi\'s Garden',
                  description: state.currentDonation.frequency !== 'one-time' ? 'Recurring donation' : 'One-time donation',
                  quantity: '1',
                  unit_amount: {
                    value: state.currentDonation.amount.toFixed(2),
                    currency_code: 'USD'
                  }
                }],
                description: 'Donation to Rabbi\'s Garden',
                payee: {
                  email_address: 'donations@rabbisgarden.org'
                }
              }],
              application_context: {
                shipping_preference: 'NO_SHIPPING',
                user_action: 'PAY_NOW'
              }
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              trackAnalytics('purchase', {
                transaction_id: details.id,
                value: state.currentDonation.amount,
                currency: 'USD'
              });
              
              processDonation({
                method: 'paypal',
                transactionId: details.id,
                payerEmail: details.payer.email_address,
                payerName: details.payer.name.given_name + ' ' + details.payer.name.surname
              });
            });
          },
          onError: function(err) {
            showPaymentError('There was an error processing your PayPal payment. Please try again or choose another payment method.');
          }
        }).render('#paypal-button-container');
      }

      function handleFormSubmit(e) {
        e.preventDefault();
        
        // Update state with form values
        state.currentDonation = {
          ...state.currentDonation,
          type: 'custom',
          amount: parseFloat(dom.customAmount.value) || 0,
          frequency: dom.frequencySelect.value,
          donorInfo: {
            name: sanitizeInput(dom.nameInput.value.trim()),
            email: sanitizeInput(dom.emailInput.value.trim()),
            message: sanitizeInput(dom.messageTextarea.value.trim())
          }
        };

        // Validate inputs
        if (!validateDonation()) return;

        // Track begin_checkout event
        trackAnalytics('begin_checkout', {
          value: state.currentDonation.amount,
          currency: 'USD'
        });

        showPaymentModal();
      }

      function validateDonation() {
        // Clear existing errors
        const existingError = document.querySelector('.validation-error');
        if (existingError) existingError.remove();

        // Validate amount
        if (state.currentDonation.amount <= 0 || state.currentDonation.amount > 100000) {
          showValidationError('Please enter a valid donation amount between $1 and $100,000');
          return false;
        }

        // Validate name
        if (!state.currentDonation.donorInfo.name || state.currentDonation.donorInfo.name.length < 2) {
          showValidationError('Please enter a valid name (minimum 2 characters)');
          return false;
        }

        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!state.currentDonation.donorInfo.email || !emailRegex.test(state.currentDonation.donorInfo.email)) {
          showValidationError('Please enter a valid email address');
          return false;
        }

        return true;
      }

      function showValidationError(message) {
        const errorElement = document.createElement('div');
        errorElement.className = 'validation-error';
        errorElement.textContent = message;
        
        dom.donationForm.insertBefore(errorElement, dom.donationForm.firstChild);
        errorElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }

      function showPaymentModal() {
        // Update donation summary
        const frequencyText = state.currentDonation.frequency !== 'one-time' 
          ? ` (${dom.frequencySelect.options[dom.frequencySelect.selectedIndex].text})` 
          : '';
        
        dom.donationSummary.textContent = 
          `You're donating $${state.currentDonation.amount.toFixed(2)}${frequencyText} to Rabbi's Garden`;
        
        // Show modal
        dom.paymentModal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        
        // Initialize payment UI
        updatePaymentUI();
      }

      function hidePaymentModal() {
        dom.paymentModal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }

      async function handlePaymentConfirmation() {
        if (state.processing) return;
        state.processing = true;
        
        try {
          dom.confirmPaymentBtn.disabled = true;
          dom.confirmPaymentBtn.textContent = 'Processing...';
          
          switch(state.currentDonation.paymentMethod) {
            case 'bank':
              await processBankTransfer();
              break;
              
            case 'card':
              await processStripePayment();
              break;
              
            default:
              throw new Error('Invalid payment method');
          }
        } catch (error) {
          console.error('Payment error:', error);
          showPaymentError(error.message || 'Payment processing failed');
        } finally {
          state.processing = false;
          dom.confirmPaymentBtn.disabled = false;
          dom.confirmPaymentBtn.textContent = 
            state.currentDonation.frequency !== 'one-time' 
              ? `Set Up Recurring Donation` 
              : `Pay $${state.currentDonation.amount.toFixed(2)}`;
        }
      }

      async function processBankTransfer() {
        const transactionId = generateTransactionId('BANK_');
        
        await processDonation({
          method: 'bank',
          transactionId: transactionId
        });
      }

      async function processStripePayment() {
        // Validate cardholder name
        const cardholderName = sanitizeInput(dom.cardholderName.value.trim());
        if (!cardholderName || cardholderName.length < 2) {
          throw new Error('Please enter a valid cardholder name');
        }

        // Create payment method
        const { paymentMethod, error } = await stripe.createPaymentMethod({
          type: 'card',
          card: cardElement,
          billing_details: {
            name: cardholderName,
            email: state.currentDonation.donorInfo.email
          }
        });

        if (error) throw error;

        // Process payment through backend
        const response = await fetch(config.backendUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-Security-Token': state.securityToken
          },
          body: JSON.stringify({
            amount: state.currentDonation.amount,
            paymentMethod: 'stripe',
            paymentMethodId: paymentMethod.id,
            donorName: state.currentDonation.donorInfo.name,
            donorEmail: state.currentDonation.donorInfo.email,
            isRecurring: state.currentDonation.frequency !== 'one-time',
            frequency: state.currentDonation.frequency,
            message: state.currentDonation.donorInfo.message,
            verificationToken: state.securityToken
          })
        });

        const data = await response.json();
        
        if (!data.success) {
          throw new Error(data.message || 'Payment processing failed');
        }

        if (data.requiresAction) {
          const { error: confirmationError } = await stripe.confirmPayment({
            clientSecret: data.clientSecret,
            return_url: window.location.href,
            receipt_email: state.currentDonation.donorInfo.email
          });
          
          if (confirmationError) throw confirmationError;
          return;
        }

        trackAnalytics('purchase', {
          transaction_id: data.paymentIntentId,
          value: state.currentDonation.amount,
          currency: 'USD'
        });

        await processDonation({
          method: 'card',
          transactionId: data.paymentIntentId
        });
      }

      async function processDonation(paymentDetails) {
        // In a real implementation, this would communicate with your backend
        // For this example, we'll simulate a successful donation
        
        const successDetails = {
          method: paymentDetails.method,
          amount: state.currentDonation.amount,
          frequency: state.currentDonation.frequency,
          donorName: state.currentDonation.donorInfo.name,
          donorEmail: state.currentDonation.donorInfo.email,
          transactionId: paymentDetails.transactionId || generateTransactionId('DON_'),
          isRecurring: state.currentDonation.frequency !== 'one-time',
          date: new Date().toISOString()
        };

        // Hide payment modal
        hidePaymentModal();
        
        // Show success message
        showPaymentSuccess(successDetails);
        
        // Reset form if this was a custom donation
        if (state.currentDonation.type === 'custom') {
          resetDonationForm();
        }
      }

      function showPaymentSuccess(details) {
        const successModal = document.createElement('div');
        successModal.className = 'success-modal';
        
        const message = `
          Thank you for your ${details.isRecurring ? 'recurring ' : ''}donation of $${details.amount.toFixed(2)}!
          
          Payment method: ${details.method}
          Transaction ID: ${details.transactionId}
          ${details.donorName ? `Name: ${details.donorName}` : ''}
          ${details.donorEmail ? `Email: ${details.donorEmail}` : ''}
          
          A confirmation has been sent to your email.
          ${details.isRecurring ? '\n\nYour recurring donation has been set up successfully.' : ''}
        `;
        
        const template = document.getElementById('successModalTemplate').cloneNode(true);
        template.style.display = 'flex';
        template.id = '';
        template.querySelector('#successMessage').textContent = message;
        
        successModal.appendChild(template);
        document.body.appendChild(successModal);
        
        template.querySelector('#closeSuccessModal').addEventListener('click', () => {
          document.body.removeChild(successModal);
        });
      }

      function showPaymentError(message) {
        const errorModal = document.createElement('div');
        errorModal.className = 'error-modal';
        
        const template = document.getElementById('errorModalTemplate').cloneNode(true);
        template.style.display = 'flex';
        template.id = '';
        template.querySelector('#errorMessage').textContent = message;
        
        errorModal.appendChild(template);
        document.body.appendChild(errorModal);
        
        template.querySelector('#closeErrorModal').addEventListener('click', () => {
          document.body.removeChild(errorModal);
          showPaymentModal();
        });
      }

      function resetDonationForm() {
        dom.amountOptions[2].classList.add('selected'); // Select $50 by default
        dom.customAmount.value = '50';
        dom.frequencySelect.value = 'one-time';
        dom.nameInput.value = '';
        dom.emailInput.value = '';
        dom.messageTextarea.value = '';
      }

      // Helper functions
      function generateSecurityToken() {
        return 'secure-token-' + Math.random().toString(36).substring(2, 15) + 
               Math.random().toString(36).substring(2, 15);
      }

      function generateTransactionId(prefix = '') {
        return prefix + Math.random().toString(36).substring(2, 15);
      }

      function sanitizeInput(input) {
        if (typeof input !== 'string') return input;
        return input.replace(/</g, "&lt;").replace(/>/g, "&gt;");
      }

      function copyToClipboard(e) {
        const targetId = e.target.getAttribute('data-target');
        const targetElement = document.getElementById(targetId);
        
        if (!targetElement) return;
        
        navigator.clipboard.writeText(targetElement.textContent).then(() => {
          const originalText = e.target.textContent;
          e.target.textContent = 'Copied!';
          e.target.style.backgroundColor = '#2d6a4f';
          
          setTimeout(() => {
            e.target.textContent = originalText;
            e.target.style.backgroundColor = '#4caf50';
          }, 2000);
        }).catch(err => {
          console.error('Failed to copy text: ', err);
        });
      }

      function trackAnalytics(event, params) {
        if (typeof gtag !== 'undefined') {
          gtag('event', event, {
            ...params,
            items: [{
              item_name: 'Donation',
              item_category: 'Fundraising',
              price: state.currentDonation.amount,
              quantity: 1
            }]
          });
        }
      }

      function checkCookieConsent() {
        if (!localStorage.getItem('cookiesAccepted')) {
          dom.cookieConsent.style.display = 'flex';
        }
      }

      function acceptCookies() {
        localStorage.setItem('cookiesAccepted', 'true');
        dom.cookieConsent.style.display = 'none';
      }

      function initFAQ() {
        document.querySelectorAll('.faq-question').forEach(question => {
          question.addEventListener('click', () => {
            const answer = question.nextElementSibling;
            answer.classList.toggle('show');
            const icon = question.querySelector('i');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
          });
          
          question.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              question.click();
            }
          });
        });
      }
    });

    // ==================== ENHANCED VALIDATION ====================
    function validateDonationForm() {
      let isValid = true;
      
      // Clear previous errors
      document.querySelectorAll('.error-message').forEach(el => el.remove());
      document.querySelectorAll('.has-error').forEach(el => el.classList.remove('has-error'));

      // Amount validation
      const amountInput = document.getElementById('customAmount');
      const amount = parseFloat(amountInput.value);
      if (isNaN(amount)) {
        showError(amountInput, 'Please enter a valid number');
        isValid = false;
      } else if (amount < 1) {
        showError(amountInput, 'Minimum donation is $1');
        isValid = false;
      } else if (amount > 100000) {
        showError(amountInput, 'Maximum donation is $100,000');
        isValid = false;
      }

      // Name validation
      const nameInput = document.getElementById('name');
      if (nameInput.value.trim().length < 2) {
        showError(nameInput, 'Please enter your full name');
        isValid = false;
      }

      // Email validation
      const emailInput = document.getElementById('email');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(emailInput.value.trim())) {
        showError(emailInput, 'Please enter a valid email');
        isValid = false;
      }

      return isValid;
    }

    function showError(inputElement, message) {
      inputElement.classList.add('has-error');
      const error = document.createElement('div');
      error.className = 'error-message';
      error.textContent = message;
      inputElement.parentNode.appendChild(error);
      inputElement.focus();
    }

    // ==================== SECURE FORM SUBMISSION ====================
    async function handleDonationSubmit(e) {
      e.preventDefault();
      
      if (!validateDonationForm()) return;

      // Show loading state
      const submitBtn = e.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.disabled = true;
      submitBtn.textContent = 'Processing...';

      try {
        // Collect form data
        const formData = {
          amount: document.getElementById('customAmount').value,
          name: document.getElementById('name').value,
          email: document.getElementById('email').value,
          frequency: document.getElementById('frequency').value,
          message: document.getElementById('message').value,
          paymentMethod: state.currentDonation.paymentMethod,
          securityToken: state.securityToken
        };

        // Process payment
        const response = await fetch('https://your-backend-api.com/process-donation', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-CSRF-Token': state.securityToken
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (!response.ok) {
          throw new Error(result.message || 'Payment processing failed');
        }

        // Show success
        showPaymentSuccess({
          amount: formData.amount,
          transactionId: result.transactionId,
          donorEmail: formData.email
        });

      } catch (error) {
        console.error('Donation error:', error);
        showPaymentError(error.message || 'An unexpected error occurred');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    }

    // ==================== SERVER-SIDE SECURITY (EXAMPLE) ====================
    // This would be in your backend (e.g., process-donation.php)
    /*
    <?php
    header('Content-Type: application/json');
    
    // 1. Verify CSRF Token
    if (!hash_equals($_SESSION['csrf_token'], $_SERVER['HTTP_X_CSRF_TOKEN'])) {
      http_response_code(403);
      die(json_encode(['error' => 'Invalid CSRF token']));
    }
    
    // 2. Validate Inputs
    $amount = filter_var($_POST['amount'], FILTER_VALIDATE_FLOAT);
    $email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);
    
    if (!$amount || $amount <= 0 || !$email) {
      http_response_code(400);
      die(json_encode(['error' => 'Invalid input data']));
    }
    
    // 3. Process Payment (Stripe example)
    \Stripe\Stripe::setApiKey('your_live_stripe_key');
    
    try {
      $paymentIntent = \Stripe\PaymentIntent::create([
        'amount' => $amount * 100,
        'currency' => 'usd',
        'description' => "Donation from {$_POST['name']}",
        'receipt_email' => $email,
        'metadata' => ['message' => $_POST['message']]
      ]);
      
      // 4. Save to database
      // ... (use prepared statements)
      
      // 5. Return success
      echo json_encode([
        'success' => true,
        'transactionId' => $paymentIntent->id
      ]);
      
    } catch (\Stripe\Exception\ApiErrorException $e) {
      http_response_code(500);
      echo json_encode(['error' => $e->getMessage()]);
    }
    */
    
    // ==================== INTEGRATION WITH EXISTING CODE ====================
    // Replace original form submission
    document.getElementById('customDonationForm').addEventListener('submit', handleDonationSubmit);
    
    // Add real-time validation
    document.getElementById('customAmount').addEventListener('blur', validateDonationForm);
    document.getElementById('email').addEventListener('blur', validateDonationForm);
  </script>
</body>
</html>